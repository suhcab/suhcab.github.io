const clubData = {
  "math": [
    {
      "name": "수랑사랑",
      "desc": "수랑사랑은 대전과학동아리의 수학동아리입니다. 외부 대회 준비를 하거나, 논문을 읽고, 문제 풀이를 위주로 합니다. 다른 동아리들에 비해서 회식 회수도 많고, 선배들과의 분위기도 편한 편입니다. 자유로운 분위기에서 수학에 대해서 공부하고, 선배들에게 질문하며 성장해나갈 수 있습니다. 연구학점은 1~2점은 평균적으로 받아 다른 동아리와 비슷합니다. 대전과학고등학교의 전통있는 수학동아리입니다."
    },
    {
      "name": "파이",
      "desc": "지난 2021년부터 2024년까지 총 14편의 논문을 게재했으며, 한국연구재단 등재지(KCI)에도 논문을 게재했습니다. GeoGebra 등의 수학 도구를 활용해 대체로 타원을 비롯한 기하와 관련된 논문을 작성 및 제출하며, YSC, 창의재단, 삼성 휴먼테크 논문 등의 대외활동에 주로 참여합니다. 현장연구학점을 최소 6학점을 보장하며, 경우에 따라 3학년 졸업 논문 심사 면제가 가능합니다."
    },
    {
      "name": "시그마",
      "desc": "시그마 수학 동아리는 학술적 역량과 협업 능력을 동시에 키울 수 있는 탐구 중심의 동아리입니다. 우리 동아리는 논문 작성을 위한 기초 강의부터 시작해, 다양한 기하학적 주제를 자유롭게 토의하고, 최종적으로 선정된 주제에 대해 역할을 나누어 개별적으로 탐구를 진행합니다. 이후 각자의 연구 성과를 모아 논문 형태로 체계적으로 정리하고, 실제로 학회에 제출함으로써 실질적인 연구 경험을 쌓을 수 있습니다. 이 과정은 수학적 사고력뿐 아니라, 문제 해결력, 글쓰기 능력, 팀워크 등 다양한 역량을 자연스럽게 향상시킬 수 있다는 점에서 큰 장점이 있습니다. 또한, 활동 중간중간에는 예산을 활용한 회식도 함께 진행되어, 학술적 분위기 속에서도 동아리원 간의 친목을 도모할 수 있습니다."
    },
    {
      "name": "MATHrix",
      "desc": "학술동아리 매트릭스는 대전과학고의 수학동아리입니다. 수학적 이론을 시뮬레이션 또는 수학적 분석을 이용하여 생활 속에 접목시키는 연구를 주로 합니다. 그리고 다른 활동은 수학을 중심으로 재밌는것들을 합니다. 첫번째 장점으론 활동을 많이 합니다. 예를 들어 YSC, 통계대회, 여러가지 학회, 그리고 외부 동아리 활동, 회식도 자주 합니다. 두번째 장점으론 담당 선생님인 한현구 선생님이 동아리 세특을 우리가 적은 그대로 반영시켜주셔서 본인이 노력하고 적은 만큼 생기부 글자 수를 늘릴 수 있다는 장점이 있습니다. 그리고 미미미누가 선택한 동아리입니다! "
    }
  ],
  "physics": [
    {
      "name": "BLITZ",
      "desc": "학술동아리 블리츠는 대전과학고등학교의 물리동아리 입니다. 주로 물리와 관련된 실험을 진행하는 편입니다. 외부 활동으로는 학회 발표가 있습니다. 연구학점도 다른 동아리들과 마찬가지로 2학점 정도 평균적으로 받는 편입니다. 다른 학술동아리들에 비해서 인원수도 꽤 있는 편이고, 1년간 프로젝트형으로 실험을 진행하는 재미있는 동아리입니다."
    },
    {
      "name": "로보티즈",
      "desc": "로보티즈는 대전과학고등학교의 대표 물리&정보 융합 동아리로, 주로 자율 주제 프로젝트를 진행하며, AI를 활용한 시뮬레이션, 스핀트로닉스 회로 설계, 스털링 엔진 제작 등 다양한 실험과 제작 활동을 수행한다. 활동은 단순한 학습을 넘어 물리, 정보 등 여러 분야를 아우르며, 진로와 연결된 탐구 활동으로 생기부 작성에도 큰 도움이 된다. 첫 번째 장점은 자유로운 주제 선택이 가능하다는 점이다. 꼭 물리가 아니어도 본인이 흥미 있는 분야를 1년간 깊이 있게 탐구할 수 있다. 두 번째 장점은 회식이 많고 분위기가 좋다는 것이다. 마지막으로 연구학점 2점을 확보할 수 있고, 열심히 하면 생기부 2000자도 받을 수 있다."
    },

    {
      "name": "무한상상",
      "desc": "무한상상은 공학에 관심 있는 학생들이 창의적인 제작 활동을 통해 실전 역량을 키우는 동아리입니다. 활동은 기초 장비 사용법과 제작 이해부터 시작해, 구성원들이 아이디어를 제안하고 팀을 나누어 공학 프로젝트를 수행하는 방식으로 진행됩니다. 3D 프린터와 목공 장비를 자유롭게 활용하며, 실제 작동하는 결과물을 만드는 데 중점을 둡니다. 또한, 다양한 대회 출전과 한과영 교류전을 통해 외부 경험을 쌓고, 그 성과는 연구학점과 생기부에 반영됩니다. 선배들의 조언과 피드백으로 활동의 완성도를 높일 수 있으며, 예산을 활용한 회식도 함께 진행되어 구성원 간의 유대감도 자연스럽게 형성됩니다."
    }
  ],
  "chemistry": [
    {
      "name": "C.C",
      "desc": "C.C (Chemistry Club)은 대전과고 14기부터 이어져 온 근본 있는 화학 동아리입니다. 다양한 실험과 기구 사용 경험을 쌓을 수 있어 수행평가와 자율연구에서 확실한 차이가 납니다. 영재학교 특성상 팀 프로젝트가 많아 협동 능력을 키우기 좋고, 물리나 생물 등 타 과목과 연관된 주제로 진로에 맞게 탐구할 수 있습니다. 선생님들께서 수준 높은 생기부를 작성해 주시고, ysc 대회에서 많은 수상 실적을 보유하고 있습니다. 2학년 부원들과 1학년 후배들이 친밀하며, 정기적인 회식을 통해 재미있고 활기찬 분위기를 유지합니다."
    },
    {
      "name": "CHAL C",
      "desc": "우리 동아리의 대표적인 활동으로 과학적 소양을 기를 수 있는 논문세미나 활동이 있습니다. 논문세미나 활동에서는 JCE의 논문을 활용해 연구 동향을 파악하고 진로를 탐색할 수 있으며, 논문 저자와의 만남 활동을 합니다. 작년에는 에너지환경탐구대회를 했으며, 재능나눔체험전 때에는 논문세미나에서 나온 실험을 진행합니다. 화학 및 그외의 과목에서도 학업적인 면에서 모르는 점이 있다면 언제든 선배에게 물어볼 수 있습니다. 전교에서 손을 꼽을 정도로 생기부 내용을 잘 쓸 수 있습니다."
    },
    {
      "name": "CHEM",
      "desc": "CHEM은 대전과학고의 대표 화학 동아리이다. 학교에 구비된 XRF, SEM, UV-Vis 등의 고가 화학 분석 장비를 직접 다루며, 탐구와 실험을 병행하는 활동을 중심으로 한다. CHEM은 실험 장비 매뉴얼 작성과 실제 활용을 통해 깊이 있는 실험 경험을 쌓을 수 있다. 화학 실험을 바탕으로 한 공동 탐구로 연구학점도 추가로 획득 가능하다. 또한, 1년에 최대 20시간까지 봉사시간이 인정되며, 회식 분위기도 좋다. 평소에 궁금했던 주제를 직접 실험해보고 싶은 학생에게 추천한다. 생기부에도 실험 기반 탐구 기록이 풍부하게 반영되어 차별화된 기록을 만들 수 있다."
    }
  ],
  "earth": [
    {
      "name": "별누리",
      "desc": "대전과학고의 유일한 천문동아리로, 다양한 천체 관측 및 촬영 실습과 천체 사진을 활용한 연구가 진행됩니다. 다양한 천체 관측 장비의 사용 방법을 익힐 수 있으며, 추계 학술 발표회, 재능나눔체험전, 노벨과학체험전, 노벨과학발표대회 등의 다양한 대외 활동을 합니다. YSC 없이도 안정적인 학점 확보가 가능합니다. 지구과학에 능통한 선배들로부터 천문학·지구과학 공부를 도움받을 수 있습니다."
    }
  ],
  "bio": [
    {
      "name": "BIO",
      "desc": "BIO는 대전과학고의 대표 생물 동아리이다. 학교 내 연구 활동은 물론, 다양한 외부 교류(세과예영, 민사, 하나, 외대부고, 상산)를 통해 융합적 관점의 생물 탐구를 진행한다. 첫 번째로, BIO는 연구학점 확보가 매우 유리하다. 작년 기준으로 대부분의 부원이 졸업요건을 만족시킬 수 있는 수준인 5~6학점을 확보했다. 두 번째 장점은 생기부 분량이 길고 알차다는 것이다. BIO는 다양한 대회 ,타 학교와의 교류전, 봉사 활동까지 연계되어 생기부 글자 수가 평균보다 많고 내용도 풍부하다. 또 다른 특징으로는 생물과 다른 분야를 융합한 주제 설정이 가능하다는 점이다. 생물이 조금 낯설어도, 관심 있는 분야와 연결하여 의미 있는 탐구를 만들 수 있다. 회식도 자주 있고 분위기도 좋다."
    },
    {
      "name": "LIFE",
      "desc": "라이프는 생명 동아리로, 주로 다양한 생물 실험과 탐구 활동을 중심으로 진행됩니다. 연구 학점도 부담 없이 잘 챙길 수 있어 편하게 활동할 수 있습니다. 1학년이고 생물을 잘 몰라도 누구나 쉽게 배우고 참여할 수 있어 처음 시작하는 사람도 부담 없이 활동할 수 있습니다. 인원 수가 많지 않아 한 사람 한 사람에게 집중할 수 있고, 지도 선생님께서도 세심하게 지도해 주셔서 활동이 원활하게 이루어집니다. 회식도 자주 하여 동아리원들끼리 친해지기 좋고, 실험과 탐구를 통해 진로에 도움 되는 경험을 쌓을 수 있는 좋은 동아리입니다."
    }
  ],
  "cs": [
  {
    "name": "파인애플",
    "desc": "파인애플은 대전과학고등학교의 정보 동아리입니다. 주로 백준 문제를 풀거나, 다양한 언어를 이용해 개발을 하기도 합니다. 실제로 1년 만에 백준 다이아2가 된 선배가 있기도 합니다. 외부 대회로는 SW AI 경진대회, 대전광역시 학생과학탐구올림픽대회, 전국 고등학교 동아리 소프트웨어 경진대회 등이 있으며, 많은 수상 실적을 가지고 있습니다. 실력과 재미를 동시에 챙길 수 있는 동아리입니다."
  }
]

};
let currentPage = "main";
let previousPage = "";
const pages = ["mainPage","subjectPage","clubIntroPage","surveyPage","resultPage"];

function hideAll() {
  pages.forEach(id => document.getElementById(id).style.display = "none");
}

function showMain() {
  previousPage = currentPage;
  currentPage = "main";
  hideAll();
  document.getElementById("mainPage").style.display = "flex";
}

function showSubjects(subject) {
  previousPage = currentPage;
  currentPage = "subject";
  hideAll();
  document.getElementById("subjectPage").style.display = "flex";

  const titles = {
    math: '수학 동아리',
    physics: '물리 동아리',
    chemistry: '화학 동아리',
    earth: '지구과학 동아리',
    bio: '생물 동아리',
    cs: '정보 동아리'
  };
  document.getElementById("subject-title").innerText = titles[subject] || "";

  const clubList = document.getElementById("clubList");
  clubList.innerHTML = "";
  const clubs = clubData[subject] || [];
  if (!clubs.length) {
    clubList.innerHTML = "<p>해당 과목의 동아리가 없습니다.</p>";
    return;
  }
  clubs.forEach(c => {
    const btn = document.createElement("button");
    btn.className = "clubButton";
    btn.innerText = c.name;
    btn.onclick = () => showClubIntro(subject, c.name);
    clubList.appendChild(btn);
  });
}

function showClubIntro(subject, clubName) {
  previousPage = currentPage;
  currentPage = "intro";
  hideAll();
  document.getElementById("clubIntroPage").style.display = "flex";

  const club = (clubData[subject] || []).find(c => c.name === clubName);
  const box = document.getElementById("clubIntroBox");
  box.className = "club-card";  // 카드 스타일 적용
  box.innerHTML = club
    ? `<h2>${club.name}</h2><p>${club.desc}</p>`
    : `<p>동아리 정보를 찾을 수 없습니다.</p>`;
}

function goBack() {
  hideAll();
  switch (previousPage) {
    case "subject":
      document.getElementById("subjectPage").style.display = "flex"; break;
    case "intro":
      document.getElementById("clubIntroPage").style.display = "flex"; break;
    case "survey":
      document.getElementById("surveyPage").style.display = "flex"; break;
    case "result":
      document.getElementById("resultPage").style.display = "flex"; break;
    default:
      document.getElementById("mainPage").style.display = "flex";
  }
  currentPage = previousPage;
}

function startSurvey() {
  previousPage = currentPage;
  currentPage = "survey";
  hideAll();
  document.getElementById("surveyPage").style.display = "flex";
}

function showResult() {
  previousPage = currentPage;
  currentPage = "result";
  hideAll();
  document.getElementById("resultPage").style.display = "flex";

  const form = document.forms['surveyForm'];
  const subject = form.subject.value;
  const activities = Array.from(form.activities)
                          .filter(a => a.checked)
                          .map(a => a.value);
  const senior = form.senior.value;
  const dining = form.dining.value;
  const difficulty = form.difficulty.value;

  const scoreTable = {/* 기존 값 그대로 */};
  const preferenceWeight = {/* 기존 값 그대로 */};
  const maxScore = 313;
  const results = [];

  for (let club in scoreTable) {
    let score = scoreTable[club].base;
    const subs = scoreTable[club].subject.split(", ");
    if (subject === "모름") {
      if (subs.includes("수학")) score += 20;
    } else if (subs.includes(subject)) {
      score += 100;
    }
    activities.forEach(act => {
      if (scoreTable[club].activity.includes(act)) score += 40;
    });
    if (preferenceWeight[senior]   === scoreTable[club].senior)   score += 20;
    if (preferenceWeight[dining]   === scoreTable[club].dining)   score += 20;
    if (preferenceWeight[difficulty]=== scoreTable[club].difficulty) score += 20;
    results.push({ club, matchRate: Math.round((score/maxScore)*100) });
  }
  results.sort((a,b)=>b.matchRate-a.matchRate);

  document.getElementById("result1st").innerText = `1등: ${results[0].club} (${results[0].matchRate}%)`;
  document.getElementById("result2nd").innerText = `2등: ${results[1].club} (${results[1].matchRate}%)`;
  document.getElementById("result3rd").innerText = `3등: ${results[2].club} (${results[2].matchRate}%)`;
}

document.addEventListener("DOMContentLoaded", () => {
  const boxes = document.querySelectorAll('input[name="activities"]');
  boxes.forEach(cb => cb.addEventListener('change', () => {
    const checked = Array.from(boxes).filter(c=>c.checked);
    if (checked.length > 2) {
      cb.checked = false;
      alert("활동은 두 개까지만 선택할 수 있습니다.");
    }
  }));
  showMain();
});
